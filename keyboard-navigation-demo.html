<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Keyboard Navigation - CodeQuest Design System</title>\n    <link rel=\"stylesheet\" href=\"design-system.css\">\n    <style>\n        body {\n            background: var(--bg-primary);\n            margin: 0;\n            padding: 1rem;\n        }\n        .demo-section {\n            margin-bottom: 3rem;\n        }\n        .keyboard-indicator {\n            position: fixed;\n            top: 1rem;\n            right: 1rem;\n            background: var(--primary-600);\n            color: white;\n            padding: 0.5rem 1rem;\n            border-radius: 0.25rem;\n            font-size: var(--text-sm);\n            z-index: 100;\n        }\n        .demo-grid {\n            display: grid;\n            gap: 1rem;\n            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n        }\n    </style>\n</head>\n<body>\n    <!-- Skip Links -->\n    <a href=\"#main-content\" class=\"skip-link\">Skip to main content</a>\n    <a href=\"#navigation\" class=\"skip-link\">Skip to navigation</a>\n\n    <!-- Keyboard Indicator -->\n    <div class=\"keyboard-indicator\" id=\"keyboard-indicator\">Mouse Navigation</div>\n\n    <!-- Live Region for Announcements -->\n    <div id=\"live-region\" class=\"live-region\" aria-live=\"polite\" aria-atomic=\"true\"></div>\n\n    <div class=\"container\">\n        <header>\n            <h1 id=\"main-content\">Keyboard Navigation Demo</h1>\n            <p class=\"text-secondary\">Full keyboard support for accessibility. Try using Tab, Enter, Space, and Arrow keys.</p>\n            \n            <!-- Keyboard Shortcuts Help -->\n            <div class=\"card\" style=\"margin: 1rem 0;\">\n                <div class=\"card-header\">\n                    <h3 class=\"card-title\">Keyboard Shortcuts</h3>\n                </div>\n                <div class=\"card-body\">\n                    <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                        <div>\n                            <p><span class=\"key\">Tab</span> - Navigate forward</p>\n                            <p><span class=\"key\">Shift</span> + <span class=\"key\">Tab</span> - Navigate backward</p>\n                            <p><span class=\"key\">Enter</span> - Activate buttons/links</p>\n                            <p><span class=\"key\">Space</span> - Activate buttons/checkboxes</p>\n                        </div>\n                        <div>\n                            <p><span class=\"key\">↑</span><span class=\"key\">↓</span> - Navigate menus/lists</p>\n                            <p><span class=\"key\">←</span><span class=\"key\">→</span> - Navigate tabs/sliders</p>\n                            <p><span class=\"key\">Esc</span> - Close modals/menus</p>\n                            <p><span class=\"key\">Home</span>/<span class=\"key\">End</span> - First/last item</p>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </header>\n\n        <!-- Navigation Menu -->\n        <nav id=\"navigation\" class=\"demo-section\">\n            <h2>Navigation Menu</h2>\n            <ul class=\"menu flex gap-4\" role=\"menubar\">\n                <li class=\"menu-item\" role=\"none\">\n                    <a href=\"#\" role=\"menuitem\" tabindex=\"0\">Home</a>\n                </li>\n                <li class=\"menu-item\" role=\"none\">\n                    <a href=\"#\" role=\"menuitem\" tabindex=\"-1\" aria-haspopup=\"true\" aria-expanded=\"false\">Products</a>\n                    <ul class=\"submenu menu\" role=\"menu\">\n                        <li><a href=\"#\" role=\"menuitem\" tabindex=\"-1\">Web Design</a></li>\n                        <li><a href=\"#\" role=\"menuitem\" tabindex=\"-1\">Mobile Apps</a></li>\n                        <li><a href=\"#\" role=\"menuitem\" tabindex=\"-1\">Consulting</a></li>\n                    </ul>\n                </li>\n                <li class=\"menu-item\" role=\"none\">\n                    <a href=\"#\" role=\"menuitem\" tabindex=\"-1\">About</a>\n                </li>\n                <li class=\"menu-item\" role=\"none\">\n                    <a href=\"#\" role=\"menuitem\" tabindex=\"-1\">Contact</a>\n                </li>\n            </ul>\n        </nav>\n\n        <!-- Button Navigation -->\n        <div class=\"demo-section\">\n            <h2>Button Navigation</h2>\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    <h3 class=\"card-title\">Button Groups</h3>\n                    <p class=\"card-subtitle\">Navigate with Tab and activate with Enter/Space</p>\n                </div>\n                <div class=\"card-body\">\n                    <div class=\"btn-group flex gap-2 mb-4\">\n                        <button class=\"btn btn-primary\" onclick=\"announce('Primary button activated')\">Primary</button>\n                        <button class=\"btn btn-secondary\" onclick=\"announce('Secondary button activated')\">Secondary</button>\n                        <button class=\"btn btn-outline\" onclick=\"announce('Outline button activated')\">Outline</button>\n                        <button class=\"btn btn-ghost\" onclick=\"announce('Ghost button activated')\">Ghost</button>\n                    </div>\n                    \n                    <div class=\"btn-group flex gap-2\">\n                        <button class=\"btn btn-success\" onclick=\"announce('Success action')\">Save</button>\n                        <button class=\"btn btn-warning\" onclick=\"announce('Warning action')\">Warning</button>\n                        <button class=\"btn btn-error\" onclick=\"announce('Delete action')\">Delete</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Form Navigation -->\n        <div class=\"demo-section\">\n            <h2>Form Navigation</h2>\n            <div class=\"card\">\n                <div class=\"card-header\">\n                    <h3 class=\"card-title\">Accessible Form</h3>\n                    <p class=\"card-subtitle\">Navigate with Tab, use arrow keys for radio buttons</p>\n                </div>\n                <div class=\"card-body\">\n                    <form onsubmit=\"handleFormSubmit(event)\">\n                        <div class=\"form-group\">\n                            <label class=\"form-label\" for=\"name\">Name *</label>\n                            <input type=\"text\" id=\"name\" class=\"form-input\" required aria-describedby=\"name-help\">\n                            <div id=\"name-help\" class=\"form-help\">Enter your full name</div>\n                        </div>\n                        \n                        <div class=\"form-group\">\n                            <label class=\"form-label\" for=\"email\">Email *</label>\n                            <input type=\"email\" id=\"email\" class=\"form-input\" required aria-describedby=\"email-help\">\n                            <div id=\"email-help\" class=\"form-help\">We'll never share your email</div>\n                        </div>\n                        \n                        <fieldset class=\"form-group\">\n                            <legend class=\"form-label\">Preferred Contact Method</legend>\n                            <div class=\"flex gap-4\">\n                                <label class=\"flex items-center gap-2\">\n                                    <input type=\"radio\" name=\"contact\" value=\"email\" checked>\n                                    Email\n                                </label>\n                                <label class=\"flex items-center gap-2\">\n                                    <input type=\"radio\" name=\"contact\" value=\"phone\">\n                                    Phone\n                                </label>\n                                <label class=\"flex items-center gap-2\">\n                                    <input type=\"radio\" name=\"contact\" value=\"mail\">\n                                    Mail\n                                </label>\n                            </div>\n                        </fieldset>\n                        \n                        <div class=\"form-group\">\n                            <label class=\"form-label\" for=\"message\">Message</label>\n                            <textarea id=\"message\" class=\"form-input form-textarea\" aria-describedby=\"message-help\"></textarea>\n                            <div id=\"message-help\" class=\"form-help\">Optional message (max 500 characters)</div>\n                        </div>\n                        \n                        <div class=\"form-group\">\n                            <label class=\"flex items-center gap-2\">\n                                <input type=\"checkbox\" required>\n                                I agree to the terms and conditions *\n                            </label>\n                        </div>\n                        \n                        <div class=\"btn-group flex gap-2\">\n                            <button type=\"submit\" class=\"btn btn-primary\">Submit Form</button>\n                            <button type=\"reset\" class=\"btn btn-secondary\">Reset</button>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n\n        <!-- Accordion Navigation -->\n        <div class=\"demo-section\">\n            <h2>Accordion Navigation</h2>\n            <div class=\"accordion\">\n                <div class=\"accordion-item\">\n                    <button class=\"accordion-header\" \n                            onclick=\"toggleAccordion(this)\" \n                            onkeydown=\"handleAccordionKeydown(event)\"\n                            aria-expanded=\"false\"\n                            aria-controls=\"panel1\">\n                        <h3 class=\"accordion-title\">Keyboard Shortcuts</h3>\n                        <span class=\"accordion-icon\" aria-hidden=\"true\">▼</span>\n                    </button>\n                    <div class=\"accordion-content\" id=\"panel1\" role=\"region\" aria-labelledby=\"panel1\">\n                        <p>Use Enter or Space to toggle accordion panels. Arrow keys navigate between headers.</p>\n                        <ul>\n                            <li>Tab through focusable elements</li>\n                            <li>Enter/Space to activate</li>\n                            <li>Arrow keys for navigation</li>\n                        </ul>\n                    </div>\n                </div>\n                \n                <div class=\"accordion-item\">\n                    <button class=\"accordion-header\" \n                            onclick=\"toggleAccordion(this)\" \n                            onkeydown=\"handleAccordionKeydown(event)\"\n                            aria-expanded=\"false\"\n                            aria-controls=\"panel2\">\n                        <h3 class=\"accordion-title\">Focus Management</h3>\n                        <span class=\"accordion-icon\" aria-hidden=\"true\">▼</span>\n                    </button>\n                    <div class=\"accordion-content\" id=\"panel2\" role=\"region\" aria-labelledby=\"panel2\">\n                        <p>Focus is properly managed when opening and closing panels.</p>\n                        <button class=\"btn btn-outline\">Focusable Button</button>\n                    </div>\n                </div>\n                \n                <div class=\"accordion-item\">\n                    <button class=\"accordion-header\" \n                            onclick=\"toggleAccordion(this)\" \n                            onkeydown=\"handleAccordionKeydown(event)\"\n                            aria-expanded=\"false\"\n                            aria-controls=\"panel3\">\n                        <h3 class=\"accordion-title\">Screen Reader Support</h3>\n                        <span class=\"accordion-icon\" aria-hidden=\"true\">▼</span>\n                    </button>\n                    <div class=\"accordion-content\" id=\"panel3\" role=\"region\" aria-labelledby=\"panel3\">\n                        <p>All interactions are announced to screen readers with proper ARIA attributes.</p>\n                        <a href=\"#\" class=\"btn btn-primary\">Learn More</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Card Navigation -->\n        <div class=\"demo-section\">\n            <h2>Card Navigation</h2>\n            <div class=\"demo-grid\">\n                <div class=\"card\" tabindex=\"0\" onclick=\"handleCardClick(this)\" onkeydown=\"handleCardKeydown(event)\" role=\"button\" aria-describedby=\"card1-desc\">\n                    <div class=\"card-header\">\n                        <h3 class=\"card-title\">Interactive Card 1</h3>\n                        <p class=\"card-subtitle\">Click or press Enter</p>\n                    </div>\n                    <div class=\"card-body\">\n                        <p id=\"card1-desc\" class=\"card-text\">This card is focusable and can be activated with keyboard.</p>\n                    </div>\n                </div>\n                \n                <div class=\"card\" tabindex=\"0\" onclick=\"handleCardClick(this)\" onkeydown=\"handleCardKeydown(event)\" role=\"button\" aria-describedby=\"card2-desc\">\n                    <div class=\"card-header\">\n                        <h3 class=\"card-title\">Interactive Card 2</h3>\n                        <p class=\"card-subtitle\">Keyboard accessible</p>\n                    </div>\n                    <div class=\"card-body\">\n                        <p id=\"card2-desc\" class=\"card-text\">Navigate between cards with Tab key.</p>\n                    </div>\n                </div>\n                \n                <div class=\"card\" tabindex=\"0\" onclick=\"handleCardClick(this)\" onkeydown=\"handleCardKeydown(event)\" role=\"button\" aria-describedby=\"card3-desc\">\n                    <div class=\"card-header\">\n                        <h3 class=\"card-title\">Interactive Card 3</h3>\n                        <p class=\"card-subtitle\">Full keyboard support</p>\n                    </div>\n                    <div class=\"card-body\">\n                        <p id=\"card3-desc\" class=\"card-text\">All interactions work with keyboard navigation.</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <!-- Modal Demo -->\n        <div class=\"demo-section\">\n            <h2>Modal Navigation</h2>\n            <div class=\"card\">\n                <div class=\"card-body\">\n                    <p>Modal dialogs trap focus and can be closed with Escape key.</p>\n                    <button class=\"btn btn-primary\" onclick=\"openModal()\">Open Modal</button>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!-- Modal -->\n    <div id=\"demo-modal\" class=\"modal\" style=\"display: none;\" role=\"dialog\" aria-labelledby=\"modal-title\" aria-modal=\"true\">\n        <div class=\"modal-content\" tabindex=\"-1\">\n            <h2 id=\"modal-title\">Keyboard Accessible Modal</h2>\n            <p>This modal traps focus and can be navigated with keyboard.</p>\n            <div class=\"form-group\">\n                <label class=\"form-label\" for=\"modal-input\">Sample Input</label>\n                <input type=\"text\" id=\"modal-input\" class=\"form-input\" placeholder=\"Try tabbing here\">\n            </div>\n            <div class=\"btn-group flex gap-2\">\n                <button class=\"btn btn-primary\" onclick=\"closeModal()\">Save</button>\n                <button class=\"btn btn-secondary\" onclick=\"closeModal()\">Cancel</button>\n            </div>\n        </div>\n    </div>\n\n    <script>\n        // Keyboard navigation detection\n        let isKeyboardUser = false;\n        \n        document.addEventListener('keydown', (e) => {\n            if (e.key === 'Tab') {\n                isKeyboardUser = true;\n                document.body.classList.add('keyboard-user');\n                document.getElementById('keyboard-indicator').textContent = 'Keyboard Navigation';\n            }\n        });\n        \n        document.addEventListener('mousedown', () => {\n            isKeyboardUser = false;\n            document.body.classList.remove('keyboard-user');\n            document.getElementById('keyboard-indicator').textContent = 'Mouse Navigation';\n        });\n\n        // Live region announcements\n        function announce(message) {\n            const liveRegion = document.getElementById('live-region');\n            liveRegion.textContent = message;\n            setTimeout(() => {\n                liveRegion.textContent = '';\n            }, 1000);\n        }\n\n        // Menu navigation\n        document.addEventListener('keydown', (e) => {\n            if (e.target.closest('.menu')) {\n                handleMenuKeydown(e);\n            }\n        });\n\n        function handleMenuKeydown(e) {\n            const menuItems = Array.from(document.querySelectorAll('.menu [role=\"menuitem\"]'));\n            const currentIndex = menuItems.indexOf(e.target);\n            \n            switch (e.key) {\n                case 'ArrowRight':\n                case 'ArrowDown':\n                    e.preventDefault();\n                    const nextIndex = (currentIndex + 1) % menuItems.length;\n                    menuItems[nextIndex].focus();\n                    break;\n                case 'ArrowLeft':\n                case 'ArrowUp':\n                    e.preventDefault();\n                    const prevIndex = (currentIndex - 1 + menuItems.length) % menuItems.length;\n                    menuItems[prevIndex].focus();\n                    break;\n                case 'Home':\n                    e.preventDefault();\n                    menuItems[0].focus();\n                    break;\n                case 'End':\n                    e.preventDefault();\n                    menuItems[menuItems.length - 1].focus();\n                    break;\n            }\n        }\n\n        // Accordion navigation\n        function toggleAccordion(header) {\n            const content = header.nextElementSibling;\n            const isOpen = header.getAttribute('aria-expanded') === 'true';\n            \n            header.setAttribute('aria-expanded', !isOpen);\n            \n            if (isOpen) {\n                content.classList.remove('open');\n                header.classList.remove('active');\n                announce('Panel collapsed');\n            } else {\n                content.classList.add('open');\n                header.classList.add('active');\n                announce('Panel expanded');\n            }\n        }\n\n        function handleAccordionKeydown(e) {\n            const headers = Array.from(document.querySelectorAll('.accordion-header'));\n            const currentIndex = headers.indexOf(e.target);\n            \n            switch (e.key) {\n                case 'ArrowDown':\n                    e.preventDefault();\n                    const nextIndex = (currentIndex + 1) % headers.length;\n                    headers[nextIndex].focus();\n                    break;\n                case 'ArrowUp':\n                    e.preventDefault();\n                    const prevIndex = (currentIndex - 1 + headers.length) % headers.length;\n                    headers[prevIndex].focus();\n                    break;\n                case 'Home':\n                    e.preventDefault();\n                    headers[0].focus();\n                    break;\n                case 'End':\n                    e.preventDefault();\n                    headers[headers.length - 1].focus();\n                    break;\n                case 'Enter':\n                case ' ':\n                    e.preventDefault();\n                    toggleAccordion(e.target);\n                    break;\n            }\n        }\n\n        // Card navigation\n        function handleCardClick(card) {\n            announce(`${card.querySelector('.card-title').textContent} activated`);\n        }\n\n        function handleCardKeydown(e) {\n            if (e.key === 'Enter' || e.key === ' ') {\n                e.preventDefault();\n                handleCardClick(e.target.closest('.card'));\n            }\n        }\n\n        // Modal navigation\n        let focusedElementBeforeModal;\n        \n        function openModal() {\n            focusedElementBeforeModal = document.activeElement;\n            const modal = document.getElementById('demo-modal');\n            modal.style.display = 'flex';\n            modal.querySelector('.modal-content').focus();\n            document.body.style.overflow = 'hidden';\n            announce('Modal opened');\n        }\n\n        function closeModal() {\n            const modal = document.getElementById('demo-modal');\n            modal.style.display = 'none';\n            document.body.style.overflow = '';\n            if (focusedElementBeforeModal) {\n                focusedElementBeforeModal.focus();\n            }\n            announce('Modal closed');\n        }\n\n        // Modal focus trap\n        document.addEventListener('keydown', (e) => {\n            const modal = document.getElementById('demo-modal');\n            if (modal.style.display === 'flex') {\n                if (e.key === 'Escape') {\n                    closeModal();\n                } else if (e.key === 'Tab') {\n                    trapFocus(e, modal);\n                }\n            }\n        });\n\n        function trapFocus(e, container) {\n            const focusableElements = container.querySelectorAll(\n                'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\n            );\n            const firstElement = focusableElements[0];\n            const lastElement = focusableElements[focusableElements.length - 1];\n\n            if (e.shiftKey) {\n                if (document.activeElement === firstElement) {\n                    e.preventDefault();\n                    lastElement.focus();\n                }\n            } else {\n                if (document.activeElement === lastElement) {\n                    e.preventDefault();\n                    firstElement.focus();\n                }\n            }\n        }\n\n        // Form submission\n        function handleFormSubmit(e) {\n            e.preventDefault();\n            announce('Form submitted successfully');\n        }\n    </script>\n</body>\n</html>